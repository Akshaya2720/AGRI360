<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank Hub | Agri-Escrow 360</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="mesh-bg flex">
    <div class="dashboard-layout w-full">
        <!-- Sidebar -->
        <aside class="sidebar animate-fade-in">
            <div class="flex items-center gap-4 mb-20">
                <div style="background: var(--primary); padding: 0.6rem; border-radius: 16px; color: white;">
                    <i data-lucide="briefcase" size="28" stroke-width="2.5"></i>
                </div>
                <span class="font-display font-black text-3xl tracking-tighter">Agri<span
                        class="emerald-600">360</span></span>
            </div>

            <nav style="flex: 1;">
                <a href="dashboard-bank.html" class="nav-item active">
                    <i data-lucide="wallet" size="20"></i>
                    <span data-i18n="nav_dashboard">Escrow Node</span>
                </a>
                <a href="#" class="nav-item">
                    <i data-lucide="receipt" size="20"></i>
                    <span data-i18n="nav_payout">Settlement Feed</span>
                </a>
                <a href="#" class="nav-item">
                    <i data-lucide="shield-alert" size="20"></i>
                    <span data-i18n="nav_risk">Risk Analytics</span>
                </a>
            </nav>

            <div class="pt-10 border-t border-gray-100">
                <div class="flex items-center gap-4 mb-8 grayscale hover:grayscale-0 transition-all duration-500">
                    <div
                        style="width: 48px; height: 48px; border-radius: 16px; background: var(--bg); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center;">
                        <i data-lucide="building" size="24" class="gray-400"></i>
                    </div>
                    <div>
                        <p class="text-sm font-black tracking-tight" id="sidebarUserName">Bank Officer</p>
                        <p class="text-[9px] font-black uppercase tracking-widest emerald-600">Bank Node 0x04</p>
                    </div>
                </div>
                <a href="#" class="nav-item !text-red-500 hover:!bg-red-50" onclick="logout()">
                    <i data-lucide="log-out" size="20"></i>
                    <span data-i18n="logout">Terminate session</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content flex flex-col min-h-screen">
            <header class="flex justify-between items-center mb-20 animate-fade-in">
                <div>
                    <h1 class="text-6xl italic font-display leading-[0.8]">
                        Liquidity <br>
                        <span class="emerald-600 NOT-italic uppercase tracking-tighter">Escrow Monitor</span>
                    </h1>
                    <p class="text-sm gray-400 font-bold tracking-widest uppercase mt-6">
                        Bank Oversight • <span class="emerald-600 animate-pulse">Pool Synchronized</span>
                    </p>
                </div>

                <div class="flex items-center gap-6">
                    <div class="glass-pill flex items-center gap-3">
                        <i data-lucide="landmark" size="16" class="emerald-600"></i>
                        <span class="text-[9px] font-black uppercase tracking-widest text-slate-900">RBI Compliance:
                            Active</span>
                    </div>
                </div>
            </header>

            <!-- Stats Grid -->
            <div class="grid grid-cols-3 gap-12 mb-20">
                <div class="card-premium">
                    <p class="text-[10px] font-black uppercase tracking-widest gray-400 mb-2">Total Pool Liquidity</p>
                    <h3 class="text-5xl font-black italic tracking-tighter">₹842<span
                            class="text-xl gray-400 NOT-italic font-bold">Cr</span></h3>
                    <div
                        class="mt-8 pt-6 border-t border-gray-100 flex items-center gap-2 text-emerald-600 font-bold text-xs">
                        <i data-lucide="shield" size="14"></i> Underwritten by State Treasury
                    </div>
                </div>

                <div class="card-premium">
                    <p class="text-[10px] font-black uppercase tracking-widest gray-400 mb-2">Disbursement Velocity</p>
                    <h3 class="text-5xl font-black italic tracking-tighter">2.4<span
                            class="text-xl gray-400 NOT-italic font-bold">ms</span></h3>
                    <div
                        class="mt-8 pt-6 border-t border-gray-100 flex items-center gap-2 text-emerald-600 font-bold text-xs">
                        <i data-lucide="zap" size="14"></i> Real-time Settlement node
                    </div>
                </div>

                <div class="card-premium">
                    <p class="text-[10px] font-black uppercase tracking-widest gray-400 mb-2">Fraud Incidence Rate</p>
                    <h3 class="text-5xl font-black italic tracking-tighter">0.02<span
                            class="text-xl gray-400 NOT-italic font-bold">%</span></h3>
                    <div
                        class="mt-8 pt-6 border-t border-gray-100 flex items-center gap-2 text-emerald-600 font-bold text-xs">
                        <i data-lucide="check-circle" size="14"></i> AI-Verified Integrity
                    </div>
                </div>
            </div>

            <!-- Settlement Trends -->
            <div class="grid grid-cols-2 gap-12 mb-20 overflow-hidden">
                <div class="card-premium h-[500px] flex flex-col">
                    <div class="flex justify-between items-center mb-8">
                        <h2 class="text-2xl font-black italic tracking-tight">Settlement <span class="emerald-600">Flow
                                node</span></h2>
                    </div>
                    <canvas id="settlementChart" class="flex-1"></canvas>
                </div>

                <div class="card-premium flex flex-col">
                    <div class="flex justify-between items-center mb-10">
                        <h2 class="text-2xl font-black italic tracking-tight">Pending <span
                                class="emerald-600">Settlements</span></h2>
                    </div>
                    <div class="space-y-4">
                        <!-- Settlement Item -->
                        <div
                            class="flex items-center justify-between p-6 bg-gray-50 border border-gray-100 rounded-[2rem] hover:bg-white transition-all duration-300">
                            <div class="flex items-center gap-4">
                                <i data-lucide="landmark" size="20" class="emerald-600"></i>
                                <div>
                                    <p class="text-sm font-black">Transaction ID #TRS-9901</p>
                                    <p class="text-[9px] font-bold gray-400 uppercase tracking-widest">Farmer Node 4402
                                        • ₹34,200</p>
                                </div>
                            </div>
                            <button class="btn-primary !py-3 !px-6 !text-[10px]">Authorize</button>
                        </div>
                        <div
                            class="flex items-center justify-between p-6 bg-gray-50 border border-gray-100 rounded-[2rem] hover:bg-white transition-all duration-300">
                            <div class="flex items-center gap-4">
                                <i data-lucide="landmark" size="20" class="emerald-600"></i>
                                <div>
                                    <p class="text-sm font-black">Transaction ID #TRS-9844</p>
                                    <p class="text-[9px] font-bold gray-400 uppercase tracking-widest">Farmer Node 1202
                                        • ₹18,400</p>
                                </div>
                            </div>
                            <button class="btn-primary !py-3 !px-6 !text-[10px]">Authorize</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="api.js"></script>
    <script src="i18n.js"></script>
    <script>
        lucide.createIcons();
        const user = getUser();
        if (!user || user.role !== 'BANK_OFFICER') window.location.href = 'login.html';

        // Initialize Chart
        const ctx = document.getElementById('settlementChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Escrow Flow (₹ Cr)',
                    data: [12, 19, 15, 25, 22, 30],
                    borderColor: '#10b981',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    borderWidth: 4,
                    tension: 0.4,
                    fill: true,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { grid: { display: false }, ticks: { font: { weight: 'bold', size: 10 } } },
                    y: { grid: { color: 'rgba(0,0,0,0.03)' }, ticks: { font: { weight: 'bold', size: 10 } } }
                }
            }
        });

        function logout() {
            localStorage.clear();
            window.location.href = 'login.html';
        }
    </script>
</body>

</html>